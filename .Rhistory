list_of_operations.operation_name_4table != '+' AND
list_of_operations.operation_name_4table != '-' AND
list_of_operations.operation_name_4table != '+c' AND
list_of_operations.operation_name_4table !=  'NULL';")
Encoding(op_names$operation_name_4table_definition) <- "UTF-8"
Encoding(op_names$operation_name_4table) <- "UTF-8"
defenition_df <- inner_join(op_names, qa2_frame, by = "operation_name_4table" )
defenition_df <- defenition_df %>% distinct(operation_name_4definition)
defenition_df <- na.omit(defenition_df)
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
qa2_frame <- reactiive_get_welding_and_overaly_table()
qa2_frame <- qa2_frame[-c(1,2,3)]
operation_name_4table <- unlist(qa2_frame)
qa2_frame <- as.data.frame(operation_name_4table)
qa2_frame$operation_name_4table <- as.character(qa2_frame$operation_name_4table)
qa2_frame <- qa2_frame %>% distinct(operation_name_4table)
op_names <- dbGetQuery(con, "SELECT DISTINCT list_of_operations.operation_name_4table_definition,
list_of_operations.operation_name_4table,
list_of_operations.operation_name_4definition
FROM	list_of_operations
WHERE 	list_of_operations.operation_id > 49 AND
list_of_operations.operation_name_4table != '+' AND
list_of_operations.operation_name_4table != '-' AND
list_of_operations.operation_name_4table != '+c' AND
list_of_operations.operation_name_4table !=  'NULL';")
Encoding(op_names$operation_name_4table_definition) <- "UTF-8"
Encoding(op_names$operation_name_4table) <- "UTF-8"
defenition_df <- inner_join(op_names, qa2_frame, by = "operation_name_4table" )
defenition_df <- defenition_df %>% distinct(operation_name_4definition)
defenition_df <- na.omit(defenition_df)
View(defenition_df)
View(op_names)
View(qa2_frame)
View(op_names)
View(qa2_frame)
View(op_names)
View(qa2_frame)
defenition_df <- inner_join(op_names, qa2_frame, by = "operation_name_4table" )
defenition_df_distinct <- defenition_df %>% distinct(operation_name_4definition)
defenition_df_distinct <- na.omit(defenition_df_distinct)
View(defenition_df_distinct)
View(defenition_df)
defenition_df <- na.omit(defenition_df)
View(defenition_df_distinct)
View(defenition_df)
View(defenition_df)
defenition_df <- defenition_df[-2]
View(defenition_df)
defenition_df <- distinct(defenition_df)
View(defenition_df)
runApp('Valve_QA_table_viewer.R')
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
View(data)
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
detail_list2 <- get_overlay_detail_list(con, input$select_valve)
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
library(shiny); runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
View(dataframe_to_be_retuned)
View(x)
View(dataframe_to_be_retuned)
View(dataframe_to_be_retuned.t)
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
library(shiny); runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
View(dataframe_to_be_retuned)
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
# get valve id
valve_id <- get_valve_input_info(con, valve_name, type = "id")
# get qa_type id
qa_type_id <- get_qa_input_info(con, qa_type, type = "id")
# get tempr_id
tempr_id <- get_tempr_input_info(con, tempr, type = "id")
# get tempr_oper_id
tempr_oper_id <- get_tempr_oper_input_info(con, tempr_oper, type = "id")
# get pressure_id
pressure_id <- get_pressure_input_info(con, pressure, type = "id")
# get detail id
detail_id <- get_detail_input_info(con, detail, type = "id")
# get material_id
material_sep_id <- get_material_input_info(con, material, type = "material type separate")
if(detail_id == 5 || detail_id == 31){
material_sep_id <- 6
}else if(detail_id == 6 || detail_id == 32){
material_sep_id <- 7
}else{
material_sep_id <- material_sep_id
}
select_operations <- paste0("SELECT
list_of_operations.operation_order,
list_of_operations.operation_name_4table
FROM
public.list_of_operations,
public.operations_qa_dependency,
public.tempr,
public.tempr_operation,
public.pressure,
public.material_type_separate,
public.valve_qa_type,
public.valve,
public.valve_id_to_socet,
public.valve_type,
public.detail,
public.hydro,
public.ferrite_phase,
public.radiography,
public.detail_to_hydro,
public.detail_to_radiography,
public.ferrite_phase_to_detail
WHERE
operations_qa_dependency.operation_id = list_of_operations.operation_id AND
tempr.tempr_id = operations_qa_dependency.tempr_id AND
tempr_operation.tempr_operation_id = operations_qa_dependency.tempr_operation_id AND
pressure.pressure_id = operations_qa_dependency.pressure_id AND
material_type_separate.material_type_separete_id = operations_qa_dependency.material_type_separete_id AND
valve_qa_type.valve_qa_type_id = operations_qa_dependency.valve_qa_type_id AND
valve.valve_id = valve_id_to_socet.valve_id AND
valve_id_to_socet.valve_type_by_socet = valve_type.valve_type_by_socet AND
valve_type.valve_type_by_socet = operations_qa_dependency.valve_type_by_socet AND
hydro.hydro_id = operations_qa_dependency.hydro_id AND
ferrite_phase.fp_id = operations_qa_dependency.fp_id AND
ferrite_phase.fp_id = ferrite_phase_to_detail.fp_id AND
radiography.rad_id = operations_qa_dependency.rad_id AND
radiography.rad_id = detail_to_radiography.rad_id AND
detail_to_hydro.hydro_id = hydro.hydro_id AND
detail_to_hydro.detail_id = detail.detail_id AND
detail_to_radiography.detail_id = detail.detail_id AND
ferrite_phase_to_detail.detail_id = detail.detail_id AND
valve.valve_id = ",valve_id," AND
valve_qa_type.valve_qa_type_id = ",qa_type_id ,"AND
detail.detail_id = ",detail_id ,"AND
material_type_separate.material_type_separete_id =  ",material_sep_id ,"AND
tempr.tempr_id = ",tempr_id ,"AND
tempr_operation.tempr_operation_id = ",tempr_oper_id," AND
list_of_operations.operation_id < 50 AND
pressure.pressure_id =", pressure_id,";")
x <- dbGetQuery(con, select_operations)
View(x)
View(dataframe_to_be_retuned)
frame_with_names_of_operations <- get_distinct_names_of_qa_operations(con,type = "QA 1")
View(frame_with_names_of_operations)
x<- dbGetQuery(con, "SELECT DISTINCT operation_order , operation_name_particular
FROM list_of_operations
WHERE list_of_operations.operation_id < 50")
Encoding(x$operation_name_particular) <- "UTF-8"
x <- x[order(x$operation_order),]
View(x)
x<- dbGetQuery(con, "SELECT DISTINCT operation_order , operation_name_particular
FROM list_of_operations
WHERE list_of_operations.operation_id < 46")
Encoding(x$operation_name_particular) <- "UTF-8"
View(x)
x <- x[order(x$operation_order),]
runApp('Valve_QA_table_viewer.R')
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
View(x)
valve_id <- get_valve_input_info(con, valve_name, type = "id")
# get qa_type id
qa_type_id <- get_qa_input_info(con, qa_type, type = "id")
# get tempr_id
tempr_id <- get_tempr_input_info(con, tempr, type = "id")
# get tempr_oper_id
tempr_oper_id <- get_tempr_oper_input_info(con, tempr_oper, type = "id")
# get pressure_id
pressure_id <- get_pressure_input_info(con, pressure, type = "id")
# get detail id
detail_id <- get_detail_input_info(con, detail, type = "id")
# get material_id
material_sep_id <- get_material_input_info(con, material, type = "material type separate")
# шпильки
if(detail_id == 5 || detail_id == 31){
material_sep_id <- 6
}else if(detail_id == 6 || detail_id == 32){
material_sep_id <- 7
}else{
material_sep_id <- material_sep_id
}
select_operations <- paste0("SELECT
list_of_operations.operation_order,
list_of_operations.operation_name_4table
FROM
public.list_of_operations,
public.operations_qa_dependency,
public.tempr,
public.tempr_operation,
public.pressure,
public.material_type_separate,
public.valve_qa_type,
public.valve,
public.valve_id_to_socet,
public.valve_type,
public.detail,
public.hydro,
public.ferrite_phase,
public.radiography,
public.detail_to_hydro,
public.detail_to_radiography,
public.ferrite_phase_to_detail
WHERE
operations_qa_dependency.operation_id = list_of_operations.operation_id AND
tempr.tempr_id = operations_qa_dependency.tempr_id AND
tempr_operation.tempr_operation_id = operations_qa_dependency.tempr_operation_id AND
pressure.pressure_id = operations_qa_dependency.pressure_id AND
material_type_separate.material_type_separete_id = operations_qa_dependency.material_type_separete_id AND
valve_qa_type.valve_qa_type_id = operations_qa_dependency.valve_qa_type_id AND
valve.valve_id = valve_id_to_socet.valve_id AND
valve_id_to_socet.valve_type_by_socet = valve_type.valve_type_by_socet AND
valve_type.valve_type_by_socet = operations_qa_dependency.valve_type_by_socet AND
hydro.hydro_id = operations_qa_dependency.hydro_id AND
ferrite_phase.fp_id = operations_qa_dependency.fp_id AND
ferrite_phase.fp_id = ferrite_phase_to_detail.fp_id AND
radiography.rad_id = operations_qa_dependency.rad_id AND
radiography.rad_id = detail_to_radiography.rad_id AND
detail_to_hydro.hydro_id = hydro.hydro_id AND
detail_to_hydro.detail_id = detail.detail_id AND
detail_to_radiography.detail_id = detail.detail_id AND
ferrite_phase_to_detail.detail_id = detail.detail_id AND
valve.valve_id = ",valve_id," AND
valve_qa_type.valve_qa_type_id = ",qa_type_id ,"AND
detail.detail_id = ",detail_id ,"AND
material_type_separate.material_type_separete_id =  ",material_sep_id ,"AND
tempr.tempr_id = ",tempr_id ,"AND
tempr_operation.tempr_operation_id = ",tempr_oper_id," AND
list_of_operations.operation_id < 50 AND
pressure.pressure_id =", pressure_id,";")
x <- dbGetQuery(con, select_operations)
View(x)
Encoding(x$operation_name_4table) <- "UTF-8"
x <- x[order(x$operation_order),]
x <- x[order(x$operation_order),]
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
View(dataframe_to_be_retuned)
View(dataframe_to_be_retuned)
runApp('C:/_IR_F/QA_table_4_details/pg_shiny_dash/Valve_QA_table_viewer.R')
library(shiny); runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
View(details_for_welding_list)
i <- 1
if(!is.na(details_for_welding_list$detail_name_rus_welding[i])){
}
i <- 3
x <- which(details_for_welding_list$detail_name_rus_welding[i], materials$Деталь)
x <- which(details_for_welding_list$detail_name_rus_welding[i] == materials$Деталь)
xx <- materials[x]
xx <- materials[x,]
View(xx)
x2 <- which(details_for_welding_list$detail_name_rus[i] == materials$Деталь)
xx2 <- materials[x,]
View(xx)
View(xx2)
x1 <- which(details_for_welding_list$detail_name_rus_welding[i] == materials$Деталь)
xx1 <- materials[x1,]
x2 <- which(details_for_welding_list$detail_name_rus[i] == materials$Деталь)
xx2 <- materials[x2,]
View(xx1)
View(xx2)
det_materilal <- paste0(xx1$Материал[1], "/n+/n", xx2$Материал[1])
det_designation <- paste0(xx1$`Обозначение чертежа детали`[1], "/n", xx2$`Обозначение чертежа детали`[1])
material_of_current_detail <- xx2$Материал[1]
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
View(materials)
View(details_for_welding_list)
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
library(shiny); runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
rm(material, name, detail)
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
View(dataframe_to_be_retuned.t)
View(x)
View(drawing_number_of_detail)
View(drawing_number_of_detail)
View(detail_list)
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
View(drawing_number_of_detail)
View(dataframe_to_be_retuned)
View(dataframe_to_be_retuned.t)
View(drawing_number_of_detail)
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
View(drawing_number_of_detail)
View(detail_list)
drawing_number_of_detail$details <- detail_list$detail_name_rus
View(drawing_number_of_detail)
del <-  which(drawing_number_of_detail$details == detail_list$detail_name_rus[i])
drawing_number_of_detail <- drawing_number_of_detail[-c(del)]
View(drawing_number_of_detail)
drawing_number_of_detail <- drawing_number_of_detail[-del]
View(drawing_number_of_detail)
drawing_number_of_detail$details <- detail_list$detail_name_rus
drawing_number_of_detail <- drawing_number_of_detail[-del,]
drawing_number_of_detail$details <- detail_list$detail_name_rus
drawing_number_of_detail <- data.frame(names=as.character(seq(length(detail_list$detail_name_rus))),
stringsAsFactors=FALSE)
drawing_number_of_detail$details <- detail_list$detail_name_rus
drawing_number_of_detail <- drawing_number_of_detail[,-del]
drawing_number_of_detail <- data.frame(names=as.character(seq(length(detail_list$detail_name_rus))),
stringsAsFactors=FALSE)
drawing_number_of_detail$details <- detail_list$detail_name_rus
View(drawing_number_of_detail)
drawing_number_of_detail <- drawing_number_of_detail[-c(del),]
View(drawing_number_of_detail)
runApp('Valve_QA_table_viewer.R')
runApp('Valve_QA_table_viewer.R')
Q
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
View(drawing_number_of_detail)
View(dataframe_to_be_retuned.t)
View(dataframe_to_be_retuned)
View(dataframe_to_be_retuned.t)
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
qa_type_name <- input$select_qa_type
tempr_name <- input$select_tempr
valve_name <- input$select_valve
dataframe_to_be_retuned <- get_distinct_names_of_qa_operations(con,type = "QA 2")
materials <- reactive_get_oper_table()
materials <- materials[c(1,2,3)]
materials$Деталь <- as.character(materials$Деталь)
materials$Материал <- as.character(materials$Материал)
details_for_welding_list <- get_welding_and_overlay_detail_list(con, valve_name)
View(details_for_welding_list)
if("Корпус + патрубок" %in% details_for_welding_list$detail_4con_name){
row_to_keep = which(details_for_welding_list$detail_4con_name != "Перех.патрубок")
details_for_welding_list <- details_for_welding_list[row_to_keep,]
}
if(is.data.frame(details_for_welding_list)){
# details_for_welding_list <- left_join(details_for_welding_list, materials$Деталь,
#                                        by = c("detail_name_rus" = "Деталь"))
#
detail_list2 <- get_overlay_detail_list(con, input$select_valve)
if(is.data.frame(detail_list2)){
overlay_detail_list <- get_overlay_detail_list(con, valve_name)
overlay_detail_list <- overlay_detail_list[(-c(2))]
overlay_detail_list$input_overlay_type <- "0"
for(i in 1 : length(overlay_detail_list$detail_4con_name)){
detail_name <- overlay_detail_list$detail_4con_name[i]
name <- paste0("overlay_", i)
input_overlay_type <- input[[name]]
overlay_detail_list$input_overlay_type[i] <- input_overlay_type
}
details_for_welding_list <- left_join(details_for_welding_list, overlay_detail_list,
by = "detail_4con_name")
}
details_for_welding_list$`Материал` <- "0"
details_for_welding_list$`Обозначение чертежа деталей` <- "0"
# Encoding(details_for_welding_list$`Обозначение чертежа деталей`) <- "ASCII"
for(i in 1 : length(details_for_welding_list$detail_name_rus)) {
# i <- 3
if(!is.na(details_for_welding_list$detail_name_rus_welding[i])){
x1 <- which(details_for_welding_list$detail_name_rus_welding[i] == materials$Деталь)
xx1 <- materials[x1,]
x2 <- which(details_for_welding_list$detail_name_rus[i] == materials$Деталь)
xx2 <- materials[x2,]
det_materilal <- paste0(xx1$Материал[1], " + ", xx2$Материал[1])
det_designation <- paste0(xx1$`Обозначение чертежа детали`[1], " & ", xx2$`Обозначение чертежа детали`[1])
material_of_current_detail <- xx2$Материал[1]
}else{
x2 <- which(details_for_welding_list$detail_name_rus[i] == materials$Деталь)
xx2 <- materials[x2,]
det_materilal <- paste0(xx2$Материал[1])
det_designation <- paste0(xx2$`Обозначение чертежа детали`[1])
material_of_current_detail <- xx2$Материал[1]
}
details_for_welding_list$Материал[i] <- det_materilal
details_for_welding_list$`Обозначение чертежа деталей`[i] <- det_designation
material_type_separate_id <- get_material_input_info(con,material_of_current_detail,
type = "material type separate")
connection_type_id <- get_conncetion_type_info(con, details_for_welding_list$detail_4con_name[i],
type = "id")
detail_4con_name_current <- details_for_welding_list$detail_4con_name[i]
x <- get_qa2_operations_for_detail(con, qa_type_name, tempr_name, connection_type_id, material_type_separate_id, detail_4con_name_current)
colnames(x)[colnames(x) == "operation_name_4table"] <- detail_4con_name_current
dataframe_to_be_retuned <- inner_join(dataframe_to_be_retuned, x, by = "operation_order")
}
dataframe_to_be_retuned.t <- t(dataframe_to_be_retuned)
dataframe_to_be_retuned.t <- as.data.frame(dataframe_to_be_retuned.t )
colnames(dataframe_to_be_retuned.t) <- as.character(unlist(dataframe_to_be_retuned.t["operation_name_particular", ]))
dataframe_to_be_retuned.t <- dataframe_to_be_retuned.t[- c(1, 2), ]
dataframe_to_be_retuned.t <- add_rownames(dataframe_to_be_retuned.t, "Деталь")
names(details_for_welding_list)[names(details_for_welding_list)=="detail_4con_name"] <- "Деталь"
details_for_welding_list <- details_for_welding_list[-c(2,3,4)]
dataframe_to_be_retuned.t <- inner_join(dataframe_to_be_retuned.t, details_for_welding_list,
by = "Деталь")
dataframe_to_be_retuned.t <- dataframe_to_be_retuned.t[, c(1,22,23,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20)]
return(dataframe_to_be_retuned.t)
}
reactiive_get_welding_and_overaly_table <- reactive({
qa_type_name <- input$select_qa_type
tempr_name <- input$select_tempr
valve_name <- input$select_valve
dataframe_to_be_retuned <- get_distinct_names_of_qa_operations(con,type = "QA 2")
materials <- reactive_get_oper_table()
materials <- materials[c(1,2,3)]
materials$Деталь <- as.character(materials$Деталь)
materials$Материал <- as.character(materials$Материал)
details_for_welding_list <- get_welding_and_overlay_detail_list(con, valve_name)
if("Корпус + патрубок" %in% details_for_welding_list$detail_4con_name){
row_to_keep = which(details_for_welding_list$detail_4con_name != "Перех.патрубок")
details_for_welding_list <- details_for_welding_list[row_to_keep,]
}
if(is.data.frame(details_for_welding_list)){
# details_for_welding_list <- left_join(details_for_welding_list, materials$Деталь,
#                                        by = c("detail_name_rus" = "Деталь"))
#
detail_list2 <- get_overlay_detail_list(con, input$select_valve)
if(is.data.frame(detail_list2)){
overlay_detail_list <- get_overlay_detail_list(con, valve_name)
overlay_detail_list <- overlay_detail_list[(-c(2))]
overlay_detail_list$input_overlay_type <- "0"
for(i in 1 : length(overlay_detail_list$detail_4con_name)){
detail_name <- overlay_detail_list$detail_4con_name[i]
name <- paste0("overlay_", i)
input_overlay_type <- input[[name]]
overlay_detail_list$input_overlay_type[i] <- input_overlay_type
}
details_for_welding_list <- left_join(details_for_welding_list, overlay_detail_list,
by = "detail_4con_name")
}
details_for_welding_list$`Материал` <- "0"
details_for_welding_list$`Обозначение чертежа деталей` <- "0"
# Encoding(details_for_welding_list$`Обозначение чертежа деталей`) <- "ASCII"
for(i in 1 : length(details_for_welding_list$detail_name_rus)) {
# i <- 3
if(!is.na(details_for_welding_list$detail_name_rus_welding[i])){
x1 <- which(details_for_welding_list$detail_name_rus_welding[i] == materials$Деталь)
xx1 <- materials[x1,]
x2 <- which(details_for_welding_list$detail_name_rus[i] == materials$Деталь)
xx2 <- materials[x2,]
det_materilal <- paste0(xx1$Материал[1], " + ", xx2$Материал[1])
det_designation <- paste0(xx1$`Обозначение чертежа детали`[1], " & ", xx2$`Обозначение чертежа детали`[1])
material_of_current_detail <- xx2$Материал[1]
}else{
x2 <- which(details_for_welding_list$detail_name_rus[i] == materials$Деталь)
xx2 <- materials[x2,]
det_materilal <- paste0(xx2$Материал[1])
det_designation <- paste0(xx2$`Обозначение чертежа детали`[1])
material_of_current_detail <- xx2$Материал[1]
}
details_for_welding_list$Материал[i] <- det_materilal
details_for_welding_list$`Обозначение чертежа деталей`[i] <- det_designation
material_type_separate_id <- get_material_input_info(con,material_of_current_detail,
type = "material type separate")
connection_type_id <- get_conncetion_type_info(con, details_for_welding_list$detail_4con_name[i],
type = "id")
detail_4con_name_current <- details_for_welding_list$detail_4con_name[i]
x <- get_qa2_operations_for_detail(con, qa_type_name, tempr_name, connection_type_id, material_type_separate_id, detail_4con_name_current)
colnames(x)[colnames(x) == "operation_name_4table"] <- detail_4con_name_current
dataframe_to_be_retuned <- inner_join(dataframe_to_be_retuned, x, by = "operation_order")
}
dataframe_to_be_retuned.t <- t(dataframe_to_be_retuned)
dataframe_to_be_retuned.t <- as.data.frame(dataframe_to_be_retuned.t )
colnames(dataframe_to_be_retuned.t) <- as.character(unlist(dataframe_to_be_retuned.t["operation_name_particular", ]))
dataframe_to_be_retuned.t <- dataframe_to_be_retuned.t[- c(1, 2), ]
dataframe_to_be_retuned.t <- add_rownames(dataframe_to_be_retuned.t, "Деталь")
names(details_for_welding_list)[names(details_for_welding_list)=="detail_4con_name"] <- "Деталь"
details_for_welding_list <- details_for_welding_list[-c(2,3,4)]
dataframe_to_be_retuned.t <- inner_join(dataframe_to_be_retuned.t, details_for_welding_list,
by = "Деталь")
dataframe_to_be_retuned.t <- dataframe_to_be_retuned.t[, c(1,22,23,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20)]
return(dataframe_to_be_retuned.t)
}
})
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
View(details_for_welding_list)
View(detail_list2)
View(overlay_detail_list)
View(details_for_welding_list)
View(details_for_welding_list)
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
select <- paste0("SELECT
list_of_operations.operation_name_4table,
list_of_operations.operation_order
FROM
public.operations_secondqa_dependency,
public.valve_qa_type,
public.tempr,
public.connection_type,
public.list_of_operations,
public.material_type_separate,
public.radiographic_for_welding,
public.control_with_helium,
public.detail_for_con,
public.detail_4con_to_helium_control,
public.detail_4con_to_radiography
WHERE
operations_secondqa_dependency.operation_id = list_of_operations.operation_id AND
valve_qa_type.valve_qa_type_id = operations_secondqa_dependency.valve_qa_type_id AND
tempr.tempr_id = operations_secondqa_dependency.tempr_id AND
connection_type.con_type_id = operations_secondqa_dependency.con_type_id AND
material_type_separate.material_type_separete_id = operations_secondqa_dependency.material_type_separete_id AND
radiographic_for_welding.r4w_id = operations_secondqa_dependency.r4w_id AND
control_with_helium.control_helium_id = operations_secondqa_dependency.control_helium_id AND
detail_for_con.detail_4con_id = detail_4con_to_radiography.detail_4con_id AND
detail_for_con.detail_4con_id = detail_4con_to_helium_control.detail_4con_id AND
detail_4con_to_helium_control.control_helium_id = control_with_helium.control_helium_id AND
detail_4con_to_radiography.r4w_id = radiographic_for_welding.r4w_id AND
valve_qa_type.valve_qa_type_name ='",qa_type_name ,"'AND
tempr.tempr_value_more_than_100 ='", tempr_name,"'AND
connection_type.con_type_id =",connection_type_id," AND
material_type_separate.material_type_separete_id =", material_type_separate_id," AND
detail_for_con.detail_4con_name ='",detail_4con_name_current,"';
")
x <- dbGetQuery(con, select)
runApp('C:/_IR_F/okanval/Valve_QA_table_viewer.R')
